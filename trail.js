let arrObj=[
    {
        "id": "bitcoin",
        "symbol": "btc",
        "name": "Bitcoin",
        "image": "https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1696501400",
        "current_price": 66087,
        "market_cap": 1296916535458,
        "market_cap_rank": 1,
        "fully_diluted_valuation": 1386407064896,
        "total_volume": 50676552480,
        "high_24h": 66233,
        "low_24h": 62146,
        "price_change_24h": 3813.51,
        "price_change_percentage_24h": 6.12381,
        "market_cap_change_24h": 74603288447,
        "market_cap_change_percentage_24h": 6.10345,
        "circulating_supply": 19644481,
        "total_supply": 21000000,
        "max_supply": 21000000,
        "ath": 69045,
        "ath_change_percentage": -4.36742,
        "ath_date": "2021-11-10T14:24:11.849Z",
        "atl": 67.81,
        "atl_change_percentage": 97275.41145,
        "atl_date": "2013-07-06T00:00:00.000Z",
        "roi": null,
        "last_updated": "2024-03-04T14:49:23.710Z"
    },
    {
        "id": "ethereum",
        "symbol": "eth",
        "name": "Ethereum",
        "image": "https://assets.coingecko.com/coins/images/279/large/ethereum.png?1696501628",
        "current_price": 3531.25,
        "market_cap": 423488645963,
        "market_cap_rank": 2,
        "fully_diluted_valuation": 423488645963,
        "total_volume": 22008131567,
        "high_24h": 3542.49,
        "low_24h": 3421.89,
        "price_change_24h": 103.53,
        "price_change_percentage_24h": 3.02036,
        "market_cap_change_24h": 11631240304,
        "market_cap_change_percentage_24h": 2.82409,
        "circulating_supply": 120133136.734454,
        "total_supply": 120133136.734454,
        "max_supply": null,
        "ath": 4878.26,
        "ath_change_percentage": -27.71971,
        "ath_date": "2021-11-10T14:24:19.604Z",
        "atl": 0.432979,
        "atl_change_percentage": 814263.32559,
        "atl_date": "2015-10-20T00:00:00.000Z",
        "roi": {
            "times": 70.48019685960008,
            "currency": "btc",
            "percentage": 7048.019685960009
        },
        "last_updated": "2024-03-04T14:49:23.636Z"
    },
    {
        "id": "tether",
        "symbol": "usdt",
        "name": "Tether",
        "image": "https://assets.coingecko.com/coins/images/325/large/Tether.png?1696501661",
        "current_price": 1.005,
        "market_cap": 100098531600,
        "market_cap_rank": 3,
        "fully_diluted_valuation": 100098531600,
        "total_volume": 84065230344,
        "high_24h": 1.007,
        "low_24h": 0.994389,
        "price_change_24h": 0.00480392,
        "price_change_percentage_24h": 0.48026,
        "market_cap_change_24h": 918112581,
        "market_cap_change_percentage_24h": 0.9257,
        "circulating_supply": 99515227360.7681,
        "total_supply": 99515227360.7681,
        "max_supply": null,
        "ath": 1.32,
        "ath_change_percentage": -23.97664,
        "ath_date": "2018-07-24T00:00:00.000Z",
        "atl": 0.572521,
        "atl_change_percentage": 75.68988,
        "atl_date": "2015-03-02T00:00:00.000Z",
        "roi": null,
        "last_updated": "2024-03-04T14:45:02.814Z"
    },
    {
        "id": "binancecoin",
        "symbol": "bnb",
        "name": "BNB",
        "image": "https://assets.coingecko.com/coins/images/825/large/bnb-icon2_2x.png?1696501970",
        "current_price": 417.81,
        "market_cap": 64345739767,
        "market_cap_rank": 4,
        "fully_diluted_valuation": 64345739767,
        "total_volume": 1836191627,
        "high_24h": 423.97,
        "low_24h": 412.13,
        "price_change_24h": 3.87,
        "price_change_percentage_24h": 0.93513,
        "market_cap_change_24h": 688326834,
        "market_cap_change_percentage_24h": 1.0813,
        "circulating_supply": 153856150,
        "total_supply": 153856150,
        "max_supply": 200000000,
        "ath": 686.31,
        "ath_change_percentage": -38.97964,
        "ath_date": "2021-05-10T07:24:17.097Z",
        "atl": 0.0398177,
        "atl_change_percentage": 1051660.41852,
        "atl_date": "2017-10-19T00:00:00.000Z",
        "roi": null,
        "last_updated": "2024-03-04T14:49:26.523Z"
    },
    {
        "id": "solana",
        "symbol": "sol",
        "name": "Solana",
        "image": "https://assets.coingecko.com/coins/images/4128/large/solana.png?1696504756",
        "current_price": 131.97,
        "market_cap": 58373079230,
        "market_cap_rank": 5,
        "fully_diluted_valuation": 75254865648,
        "total_volume": 3584050939,
        "high_24h": 134.47,
        "low_24h": 128.73,
        "price_change_24h": 2.71,
        "price_change_percentage_24h": 2.0967,
        "market_cap_change_24h": 994384260,
        "market_cap_change_percentage_24h": 1.73302,
        "circulating_supply": 442942268.136383,
        "total_supply": 571043311.185741,
        "max_supply": null,
        "ath": 259.96,
        "ath_change_percentage": -49.28939,
        "ath_date": "2021-11-06T21:54:35.825Z",
        "atl": 0.500801,
        "atl_change_percentage": 26223.20295,
        "atl_date": "2020-05-11T19:35:23.449Z",
        "roi": null,
        "last_updated": "2024-03-04T14:49:26.514Z"
    },
    {
        "id": "ripple",
        "symbol": "xrp",
        "name": "XRP",
        "image": "https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png?1696501442",
        "current_price": 0.658375,
        "market_cap": 36032532050,
        "market_cap_rank": 6,
        "fully_diluted_valuation": 65908338866,
        "total_volume": 2795933271,
        "high_24h": 0.663063,
        "low_24h": 0.619744,
        "price_change_24h": 0.03784041,
        "price_change_percentage_24h": 6.09804,
        "market_cap_change_24h": 2086522206,
        "market_cap_change_percentage_24h": 6.14659,
        "circulating_supply": 54664031281,
        "total_supply": 99987852435,
        "max_supply": 100000000000,
        "ath": 3.4,
        "ath_change_percentage": -80.59339,
        "ath_date": "2018-01-07T00:00:00.000Z",
        "atl": 0.00268621,
        "atl_change_percentage": 24452.23673,
        "atl_date": "2014-05-22T00:00:00.000Z",
        "roi": null,
        "last_updated": "2024-03-04T14:49:21.524Z"
    },
    {
        "id": "staked-ether",
        "symbol": "steth",
        "name": "Lido Staked Ether",
        "image": "https://assets.coingecko.com/coins/images/13442/large/steth_logo.png?1696513206",
        "current_price": 3526.07,
        "market_cap": 34681020735,
        "market_cap_rank": 7,
        "fully_diluted_valuation": 34681961200,
        "total_volume": 45647284,
        "high_24h": 3535.46,
        "low_24h": 3415.98,
        "price_change_24h": 101.15,
        "price_change_percentage_24h": 2.95346,
        "market_cap_change_24h": 958900867,
        "market_cap_change_percentage_24h": 2.84354,
        "circulating_supply": 9844636.76785665,
        "total_supply": 9844903.73035369,
        "max_supply": null,
        "ath": 4829.57,
        "ath_change_percentage": -27.00237,
        "ath_date": "2021-11-10T14:40:47.256Z",
        "atl": 482.9,
        "atl_change_percentage": 630.06832,
        "atl_date": "2020-12-22T04:08:21.854Z",
        "roi": null,
        "last_updated": "2024-03-04T14:49:27.150Z"
    },
    {
        "id": "usd-coin",
        "symbol": "usdc",
        "name": "USDC",
        "image": "https://assets.coingecko.com/coins/images/6319/large/usdc.png?1696506694",
        "current_price": 1.002,
        "market_cap": 28929913073,
        "market_cap_rank": 8,
        "fully_diluted_valuation": 28957674415,
        "total_volume": 7941196048,
        "high_24h": 1.007,
        "low_24h": 0.994936,
        "price_change_24h": 0.00170714,
        "price_change_percentage_24h": 0.17071,
        "market_cap_change_24h": -76821816.24498367,
        "market_cap_change_percentage_24h": -0.26484,
        "circulating_supply": 28854886764.3677,
        "total_supply": 28861855193.7591,
        "max_supply": null,
        "ath": 1.17,
        "ath_change_percentage": -14.48631,
        "ath_date": "2019-05-08T00:40:28.300Z",
        "atl": 0.877647,
        "atl_change_percentage": 14.26287,
        "atl_date": "2023-03-11T08:02:13.981Z",
        "roi": null,
        "last_updated": "2024-03-04T14:49:28.551Z"
    },
    {
        "id": "cardano",
        "symbol": "ada",
        "name": "Cardano",
        "image": "https://assets.coingecko.com/coins/images/975/large/cardano.png?1696502090",
        "current_price": 0.786951,
        "market_cap": 27728025367,
        "market_cap_rank": 9,
        "fully_diluted_valuation": 35481939717,
        "total_volume": 1401704257,
        "high_24h": 0.795786,
        "low_24h": 0.721562,
        "price_change_24h": 0.062391,
        "price_change_percentage_24h": 8.61084,
        "market_cap_change_24h": 2227773164,
        "market_cap_change_percentage_24h": 8.73628,
        "circulating_supply": 35166091580.0693,
        "total_supply": 45000000000,
        "max_supply": 45000000000,
        "ath": 3.09,
        "ath_change_percentage": -74.45494,
        "ath_date": "2021-09-02T06:00:10.474Z",
        "atl": 0.01925275,
        "atl_change_percentage": 3995.79623,
        "atl_date": "2020-03-13T02:22:55.044Z",
        "roi": null,
        "last_updated": "2024-03-04T14:49:26.575Z"
    },
    {
        "id": "dogecoin",
        "symbol": "doge",
        "name": "Dogecoin",
        "image": "https://assets.coingecko.com/coins/images/5/large/dogecoin.png?1696501409",
        "current_price": 0.168162,
        "market_cap": 23964848008,
        "market_cap_rank": 10,
        "fully_diluted_valuation": 23964776112,
        "total_volume": 6288767337,
        "high_24h": 0.169478,
        "low_24h": 0.138131,
        "price_change_24h": 0.02898714,
        "price_change_percentage_24h": 20.82782,
        "market_cap_change_24h": 3940284376,
        "market_cap_change_percentage_24h": 19.67725,
        "circulating_supply": 143328706383.705,
        "total_supply": 143328786383.705,
        "max_supply": null,
        "ath": 0.731578,
        "ath_change_percentage": -77.36083,
        "ath_date": "2021-05-08T05:08:23.458Z",
        "atl": 0.0000869,
        "atl_change_percentage": 190482.31529,
        "atl_date": "2015-05-06T00:00:00.000Z",
        "roi": null,
        "last_updated": "2024-03-04T14:49:21.125Z"
    }]

    console.log(arrObj); //it is a huge object


    function renderTable(data) {
        const tablebody = document.querySelector("#coinTable >tbody");
        console.log("the table object is : ",tablebody);
        console.log("the table object is : ",tablebody.childElementCount );
        if(tablebody.childElementCount===0){
            //mean no tag inside the tablebody
        data.forEach((coin) => {
            const row = `<tr>
                <td><img src="${coin.image}" alt="${coin.name} logo" width="32" /></td>
                <td>${coin.id}</td>
                <td>${coin.name}</td>
                <td>${coin.symbol}</td>
                <td>${coin.current_price.toFixed(2)}</td>
                <td>${coin.total_volume.toLocaleString()}</td>
            </tr>`;
            tablebody.innerHTML += row;
        });
        }else{
            tablebody.innerHTML="" //clear the previous tag inside the tbody
            data.forEach((coin) => {
                const row = `<tr>
                    <td><img src="${coin.image}" alt="${coin.name} logo" width="32" /></td>
                    <td>${coin.id}</td>
                    <td>${coin.name}</td>
                    <td>${coin.symbol}</td>
                    <td>${coin.current_price.toFixed(2)}</td>
                    <td>${coin.total_volume.toLocaleString()}</td>
                </tr>`;
                tablebody.innerHTML += row;
            });
        }
    }

    window.onload = function () {
        renderTable(arrObj);
    };
    const backBtn = document.querySelector('.headpart > button');

    backBtn.addEventListener('click', () => {
      renderTable(arrObj);
    });
    
    function  ResultNotFound(searchTerm){
       
        alert(`${searchTerm}  DATE NOT FOUND`);
     }

    function searchCoins() {
       const searchInput = document.getElementById('searchInput');
        const searchTerm = searchInput.value.toLowerCase();
    
        // Find the coin that matches the search term
        const matchedCoin = arrObj.find(coin => coin.name.toLowerCase() === searchTerm);
        //const matchedCoins = arrObj.filter(coin => coin.name.toLowerCase().includes(searchTerm));

        console.log("the serched object is ",matchedCoin)
        // If a matching coin is found, update the table with only that coin
        if (matchedCoin) {
            searchInput.value = '';
            renderTable([matchedCoin]);
        } else {
            searchInput.value = '';
            console.log("No matching coin found");
            ResultNotFound(searchTerm);
            // Handle the case where no matching coin is found (e.g., show an error message)
        }
    }
    


    let isMarketCapAscending = false;
    function toggleSortMarketCap() {
        const sortedData = arrObj.sort((a, b) => {
            if (isMarketCapAscending) {
              return b.market_cap - a.market_cap;
            } else {
              return a.market_cap - b.market_cap;
            }
          });
          console.log("the sorted data",sortedData)
          renderTable(sortedData);
          isMarketCapAscending = !isMarketCapAscending; //making it as false
      }


      let isPercentageChangeAscending = false;
      function toggleSortPercentageChange() {
        const sortedDataPrecentage = arrObj.sort((a, b) => {
            if (isPercentageChangeAscending) {
              return b.market_cap_change_percentage_24h- a.market_cap_change_percentage_24h;
            } else {
              return a.market_cap_change_percentage_24h- b.market_cap_change_percentage_24h;
            }
          });
          renderTable(sortedDataPrecentage);
          isPercentageChangeAscending = !isPercentageChangeAscending; //making it as false
      }
    